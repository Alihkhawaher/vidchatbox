<div class="container is-max-desktop">
    <h1 class="title is-2 has-text-centered mb-6" data-translate="title">YouTube Video Summarizer</h1>
    
    <div class="box">
        <div class="field">
            <div class="control">
                <input type="url" id="youtubeUrl" class="input is-medium" data-translate="urlPlaceholder" placeholder="Enter YouTube URL" required>
            </div>
        </div>

        <div class="field is-grouped is-grouped-multiline mt-4">
            <div class="control is-expanded">
                <div class="select is-fullwidth">
                    <select id="providerSelect">
                        <option value="google" data-translate="providers.google">Google</option>
                        <option value="koboldcpp" data-translate="providers.koboldcpp">Koboldcpp</option>
                        <option value="claude" data-translate="providers.claude">Claude (Opus)</option>
                        <option value="haiku" data-translate="providers.haiku">Claude (Haiku)</option>
                        <option value="sonnet" data-translate="providers.sonnet">Claude (Sonnet)</option>
                    </select>
                </div>
            </div>
            
            <div class="control is-expanded">
                <div class="select is-fullwidth">
                    <select id="captionLanguage">
                        <option value="ar">Arabic</option>
                        <option value="en">English</option>
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="hi">Hindi</option>
                        <option value="id">Indonesian</option>
                        <option value="it">Italian</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="ms">Malay</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                        <option value="zh">Chinese</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="field mt-3">
            <div class="control">
                <label class="checkbox">
                    <input type="checkbox" id="allowAutoGenerated" checked>
                    <span data-translate="allowAutoGenerated">Allow auto-generated captions</span>
                </label>
            </div>
        </div>

        <div class="field mt-4">
            <div class="control">
                <button onclick="handleSubmit()" id="submitBtn" class="button is-primary is-fullwidth" data-translate="buttons.submit">Get Captions</button>
            </div>
        </div>
    </div>

    <div id="loading" class="notification is-info is-light has-text-centered is-hidden" data-translate="processingCaptions">
        Processing video captions...
    </div>

    <div id="error" class="notification is-danger is-light is-hidden"></div>
    <div id="status" class="notification is-info is-light is-hidden"></div>

    <div id="captionsContent" class="box content is-hidden has-background-white-ter"></div>

    <div id="chatResponse" class="mt-6">
        <div class="box chat-messages"></div>
    </div>

    <div class="chat-input-container box mt-5">
        <div class="field has-addons">
            <div class="control is-expanded">
                <input type="text" id="chatInput" class="input" data-translate="chatPlaceholder" placeholder="Type your message...">
            </div>
            <div class="control">
                <button onclick="sendMessage()" id="sendBtn" class="button is-primary">
                    <span class="icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 2L11 13M22 2L15 22L11 13M11 13L2 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                </button>
            </div>
        </div>
    </div>

    <div id="debug" class="box mt-6 is-hidden"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Update translations for provider options
        const providerSelect = document.getElementById('providerSelect');
        if (providerSelect) {
            Array.from(providerSelect.options).forEach(option => {
                const translationKey = option.getAttribute('data-translate');
                if (translationKey) {
                    const currentLang = document.getElementById('languageSelect')?.value || 'en';
                    const translation = getNestedTranslation(translations[currentLang], translationKey);
                    if (translation) {
                        option.textContent = translation;
                    }
                }
            });
        }
    });
</script>
